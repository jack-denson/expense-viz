(function(e){function t(t){for(var a,s,i=t[0],c=t[1],l=t[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,i=1;i<n.length;i++){var c=n[i];0!==r[c]&&(a=!1)}a&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},r={app:0},o=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"1aec":function(e,t,n){var a=n("ded3").default,r=n("6374").default;function o(e){var t=new Date(e)||new Date;return t.setDate(t.getDate()-t.getDay()%7),t}function s(e){var t=e||new Date;return(t.getDay()+(t.getHours()+(t.getMinutes()+t.getSeconds()/60)/60)/24)/7}function i(e){var t=o(new Date),n=new Date(t);n.setDate(n.getDate()-7);var s,i=[],c=r(e);try{for(c.s();!(s=c.n()).done;){var l=s.value;i.push(a(a({},l),{},{lastWk:l.Week==t.toLocaleDateString()})),l.Week==n.toLocaleDateString()&&i.push(a(a({},l),{},{lastWk:!0}))}}catch(u){c.e(u)}finally{c.f()}return i}n("d3b7"),n("99af");var c=function(e){var t=[];for(var n in e){var a=e[n].reduce((function(e,t){return e+t.Cost}),0);t.push({Week:n,"Total Spent":a})}return t},l=function(e,t){return(e[o(t).toLocaleDateString()]||[]).reduce((function(e,t){return e+t.Cost}),0)};e.exports={flatten:function(e){var t=[];for(var n in e)t=t.concat(e[n]);return t},thisWeek:function(e,t){var n=o(t);return e[n.toLocaleDateString()]||[]},weekTotals:c,thisWeekTotal:l,howFarInWeek:s,getLastSunday:o,weekTotalsWithThis:function(e,t){return i(c(e),t)}}},"1f9a":function(e,t,n){"use strict";n("26c6")},"26c6":function(e,t,n){},"3fff":function(e,t,n){"use strict";n("9252")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{staticClass:"application"},[n("div",{staticClass:"text-h2",staticStyle:{"text-align":"center"}},[e._v(" Expenses ")]),e.loggedIn?n("Expenses",{attrs:{loggedIn:e.loggedIn}}):n("Login",{on:{loginSuccess:function(t){e.loggedIn=!0}}})],1)},o=[],s=n("1da1"),i=(n("96cf"),n("d3b7"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-main",{staticClass:"grey lighten-3"},[n("v-container",[n("v-row",[n("v-spacer"),n("v-col",{attrs:{cols:"12",sm:"10"}},[n("v-sheet",{attrs:{"min-height":"90vh",rounded:"lg"}},[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"1"}},[new Date(e.lastSun).getTime()!=e.earliestWeek.getTime()?n("v-btn",{attrs:{small:"",outlined:""},on:{click:function(t){return e.setDay(!1)}}},[n("v-icon",[e._v(" mdi-arrow-left-thin ")])],1):e._e()],1),n("v-spacer"),e.mostRecent?e._e():n("v-col",{staticStyle:{"padding-left":"0px"},attrs:{cols:"1"}},[n("v-btn",{attrs:{small:"",outlined:""},on:{click:function(t){return e.setDay(!0)}}},[n("v-icon",[e._v(" mdi-arrow-right-thin ")])],1)],1)],1),n("v-row",[n("v-spacer"),n("v-col",[n("Total",{attrs:{projection:!1,spent:Math.round(100*e.weekTotal)/100,week:e.lastSun}})],1),n("v-spacer"),n("v-col",[e.mostRecent?n("Total",{attrs:{projection:!0,spent:Math.round(e.weekTotal/e.weekPctg*100)/100,week:e.lastSun}}):e._e()],1),n("v-spacer")],1),n("v-row",[n("v-btn",{staticStyle:{"margin-left":"30px"},attrs:{outlined:""},on:{click:function(t){e.table=!e.table}}},[n("v-icon",[e._v(e._s(e.table?"mdi-chart-areaspline":"mdi-table-large")+" ")])],1),n("v-btn",{staticStyle:{"margin-left":"30px"},attrs:{outlined:""},on:{click:function(t){e.adding=!0}}},[n("v-icon",[e._v(" mdi-plus ")])],1)],1)],1),e.table?n("div",[n("v-data-table",{attrs:{headers:e.tableHeaders,items:e.tableData,"items-per-page":-1,"hide-default-footer":""},scopedSlots:e._u([{key:"item.Category",fn:function(t){var a=t.item;return[n("v-chip",{attrs:{color:e.getColor(a.Category)}},[e._v(" "+e._s(a.Category)+" ")])]}},{key:"item.actions",fn:function(t){var a=t.item;return[n("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteExpense(a)}}},[e._v(" mdi-delete ")])]}}])})],1):n("div",e._l(e.specs,(function(t,a){return n("viz",{key:JSON.stringify(t),attrs:{left:a%2==0,data:e.expenses,preprocessor:t.preprocessor,spec:t.schema,idNum:a,day:e.day}})})),1),n("AddExpense",{attrs:{adding:e.adding},on:{close:function(t){e.adding=!1},addedDoc:e.addDoc}})],1)],1),n("v-spacer")],1)],1)],1)],1)}),c=[],l=n("5530"),u=(n("e9c4"),n("a434"),n("d81d"),n("b680"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",[e.left?e._e():n("v-spacer"),n("v-col",{attrs:{cols:"12",sm:"10",md:"8"}},[n("v-sheet",{staticStyle:{position:"relative"},attrs:{rounded:"lg","min-height":"100","min-width":"100%",outlined:""}},[n("div",{staticClass:"embeddedViz",attrs:{id:"vl"+e.$props.idNum}})])],1),e.left?n("v-spacer"):e._e()],1)],1)}),d=[],p=(n("ddb0"),n("87e7")),f=n("1aec"),v=n.n(f),m={name:"Viz",components:{},props:["left","spec","data","preprocessor","idNum","day"],methods:{genViz:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.$props.spec,a=v.a[e.$props.preprocessor],n.data.values=a(e.$props.data,e.$props.day),t.next=5,Object(p["a"])("#vl"+e.$props.idNum,n,{actions:!1});case 5:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.genViz()}},g=m,h=(n("3fff"),n("2877")),x=n("6544"),w=n.n(x),y=n("62ad"),b=n("a523"),S=n("0fd9"),_=n("8dd9"),k=n("2fa4"),C=Object(h["a"])(g,u,d,!1,null,null,null),D=C.exports;w()(C,{VCol:y["a"],VContainer:b["a"],VRow:S["a"],VSheet:_["a"],VSpacer:k["a"]});var j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-sheet",{staticStyle:{"min-height":"150px"},attrs:{outlined:"",rounded:"xl"}},[n("div",{staticClass:"text-overline totalNum",staticStyle:{"text-align":"center","margin-top":"17px"}},[e._v(" "+e._s(e.$props.projection?"Projected":"Total Spent")+" ")]),n("div",{staticClass:"text-h2 totalNum",staticStyle:{"text-align":"center"}},[e._v(" "+e._s("$"+e.$props.spent)+" ")]),n("div",{staticClass:"text-overline totalNum",staticStyle:{"text-align":"center"}},[e._v(" Week of "+e._s(e.$props.week)+" ")])])},V=[],O={name:"Total",components:{},props:["spent","projection","week"],methods:{},mounted:function(){}},T=O,I=(n("d85d"),Object(h["a"])(T,j,V,!1,null,null,null)),$=I.exports;w()(I,{VSheet:_["a"]});var E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-dialog",{attrs:{"max-width":"500px",persistent:""},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[n("v-card",[n("v-card-title",[n("div",{staticClass:"text-h5",staticStyle:{width:"100%","text-align":"center"}},[e._v(" Add Expense")])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{outlined:"",label:"Name"},model:{value:e.editedItem.Name,callback:function(t){e.$set(e.editedItem,"Name",t)},expression:"editedItem.Name"}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{outlined:"",type:"number",prefix:"$",label:"Cost"},model:{value:e.editedItem.Cost,callback:function(t){e.$set(e.editedItem,"Cost",t)},expression:"editedItem.Cost"}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-select",{attrs:{items:e.categories,outlined:"",label:"Category"},model:{value:e.editedItem.Category,callback:function(t){e.$set(e.editedItem,"Category",t)},expression:"editedItem.Category"}})],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{outlined:""},on:{click:function(t){e.editedItem={Cost:0,Category:"",Name:""},e.$emit("close")}}},[e._v(" Cancel ")]),n("v-btn",{attrs:{outlined:""},on:{click:e.addExpense}},[e._v(" Save ")])],1)],1)],1)],1)},R=[],N={name:"AddExpense",props:["adding"],data:function(){return{open:this.$props.adding,editedItem:{Cost:0,Category:"",Name:""},categories:["Misc","Transportation","Entertainment","Extras","School","Eating Out","Groceries","Alcohol","Coffee","Unknown"]}},methods:{addExpense:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.editedItem.Category||!e.editedItem.Name){t.next=8;break}return t.next=3,fetch("api/add-expense",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.editedItem)});case 3:return n=t.sent,t.next=6,n.json();case 6:a=t.sent,200===n.status?(console.log("Successful add"),e.$emit("addedDoc",a),e.$emit("close")):console.log("Unsuccessful add");case 8:case"end":return t.stop()}}),t)})))()}},watch:{adding:function(e){this.open=e}},computed:{}},L=N,P=n("8336"),W=n("b0af"),M=n("99d9"),A=n("169a"),F=n("b974"),z=n("8654"),J=Object(h["a"])(L,E,R,!1,null,null,null),U=J.exports;w()(J,{VBtn:P["a"],VCard:W["a"],VCardActions:M["a"],VCardText:M["b"],VCardTitle:M["c"],VCol:y["a"],VContainer:b["a"],VDialog:A["a"],VRow:S["a"],VSelect:F["a"],VSpacer:k["a"],VTextField:z["a"]});var B={name:"Expenses",components:{Viz:D,Total:$,AddExpense:U},props:["loggedIn"],data:function(){return{expenses:{},specs:{},day:new Date,table:!1,tableHeaders:[{text:"Name",align:"start",sortable:!1,value:"Name"},{text:"Price",value:"Cost"},{text:"Category",value:"Category"},{text:"Time",value:"created_time"},{text:"Delete",value:"actions",sortable:!1}],colors:{},adding:!1}},methods:{getExpenses:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/data");case 2:return n=t.sent,t.next=5,n.json();case 5:e.expenses=t.sent;case 6:case"end":return t.stop()}}),t)})))()},getSpecs:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/specs");case 2:return n=t.sent,t.next=5,n.json();case 5:e.specs=t.sent;case 6:case"end":return t.stop()}}),t)})))()},setDay:function(e){this.day.setDate(this.day.getDate()+7*(2*e-1)),this.day=new Date(this.day)},getData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getExpenses();case 2:return t.next=4,e.getSpecs();case 4:case"end":return t.stop()}}),t)})))()},getColor:function(e){return this.colors[e]||(this.colors[e]="hsl(".concat(300*Math.random(),", 90%, 75%)")),this.colors[e]},deleteExpense:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,r,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,fetch("api/delete-expense",{method:"DELETE",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:e._id})});case 2:if(a=n.sent,200===a.status){for(s in console.log("Successful delete"),r=v.a.getLastSunday(e.created_time).toLocaleDateString(),o=-1,t.expenses[r])t.expenses[r][s]._id===e._id&&(o=s);-1!=o&&t.expenses[r].splice(o,1)}else console.log("Unsuccessful delete");case 4:case"end":return n.stop()}}),n)})))()},addDoc:function(e){var t=v.a.getLastSunday(e.created_time).toLocaleDateString();this.expenses[t]||(this.expenses[t]=[]),this.expenses[t].push(e)}},watch:{loggedIn:function(e){e&&this.getData()}},computed:{weekPctg:function(){return v.a.howFarInWeek(this.day)},weekTotal:function(){return v.a.thisWeekTotal(this.expenses,this.day)},lastSun:function(){return v.a.getLastSunday(this.day).toLocaleDateString()},mostRecent:function(){return new Date-new Date(this.lastSun)<6048e5},earliestWeek:function(){var e=new Date;for(var t in this.expenses)new Date(t)<e&&(e=new Date(t));return e},tableData:function(){return this.expenses[this.lastSun].map((function(e){return Object(l["a"])(Object(l["a"])({},e),{},{Cost:"$"+e.Cost.toFixed(2),created_time:new Date(e.created_time).toLocaleString()})}))}},beforeMount:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$props.loggedIn&&e.getData();case 1:case"end":return t.stop()}}),t)})))()}},H=B,G=(n("1f9a"),n("cc20")),q=n("8fea"),K=n("132d"),Q=n("f6c4"),X=Object(h["a"])(H,i,c,!1,null,null,null),Y=X.exports;w()(X,{VBtn:P["a"],VChip:G["a"],VCol:y["a"],VContainer:b["a"],VDataTable:q["a"],VIcon:K["a"],VMain:Q["a"],VRow:S["a"],VSheet:_["a"],VSpacer:k["a"]});var Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-container",{staticStyle:{display:"flex","justify-content":"center"}},[n("v-sheet",{attrs:{color:"#f5f5f5",height:"70vh",outlined:"",rounded:"",elevation:"1",width:"60vw"}},[n("h1",{staticStyle:{"text-align":"center","margin-top":"10vh"}},[e._v("Login")]),n("div",{staticStyle:{display:"flex","justify-content":"center","margin-top":"5vh"}},[n("div",{staticStyle:{width:"30vw"}},[e.loginFail?n("v-banner",{staticStyle:{"margin-bottom":"30px"},attrs:{color:"#eecccc",elevation:"2",rounded:"","single-line":""}},[n("v-icon",[e._v("mdi-account")]),e._v(" Incorrect Username or Password ")],1):e._e(),n("form",{on:{submit:e.login}},[n("v-text-field",{staticStyle:{width:"100%"},attrs:{label:"Username",outlined:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),n("v-text-field",{staticStyle:{width:"100%"},attrs:{label:"Password",type:"password",outlined:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("v-btn",{attrs:{block:"",color:"primary",type:"submit"}},[e._v(" Submit ")])],1)],1)])])],1)],1)},ee=[],te={name:"Login",components:{},data:function(){return{username:"",password:"",loginFail:!1}},methods:{login:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.preventDefault(),n.next=3,fetch("api/login",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t.username,password:t.password})});case 3:a=n.sent,200===a.status?t.$emit("loginSuccess"):t.loginFail=!0;case 5:case"end":return n.stop()}}),n)})))()}}},ne=te,ae=(n("97a1"),n("e4e5")),re=Object(h["a"])(ne,Z,ee,!1,null,null,null),oe=re.exports;w()(re,{VBanner:ae["a"],VBtn:P["a"],VContainer:b["a"],VIcon:K["a"],VSheet:_["a"],VTextField:z["a"]});var se={name:"App",components:{Login:oe,Expenses:Y},data:function(){return{loggedIn:!1}},beforeMount:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return document.title="Expense Tracker",t.next=3,fetch("api/user");case 3:n=t.sent,e.loggedIn=200===n.status;case 5:case"end":return t.stop()}}),t)})))()}},ie=se,ce=(n("034f"),n("7496")),le=Object(h["a"])(ie,r,o,!1,null,null,null),ue=le.exports;w()(le,{VApp:ce["a"]});var de=n("f309");a["a"].use(de["a"]);var pe=new de["a"]({});a["a"].config.productionTip=!1,new a["a"]({vuetify:pe,render:function(e){return e(ue)}}).$mount("#app")},"85ec":function(e,t,n){},9252:function(e,t,n){},"97a1":function(e,t,n){"use strict";n("ce55")},ce55:function(e,t,n){},d85d:function(e,t,n){"use strict";n("efa0")},efa0:function(e,t,n){}});
//# sourceMappingURL=app.b1657a67.js.map